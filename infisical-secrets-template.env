# =============================================================================
# Infisical Secrets Configuration Template
# =============================================================================
# This file documents all secrets that need to be stored in Infisical
# organized by project for the IQS workflow system.
#
# DO NOT store actual secret values in this file!
# Use this as a reference when setting up your Infisical projects.
# =============================================================================

# -----------------------------------------------------------------------------
# INFISICAL SERVICE AUTHENTICATION (stored on when scheduler host)
# -----------------------------------------------------------------------------
# These credentials are used by infisicalservice to authenticate with Infisical
# Store these as environment variables on the when/fetcher host, NOT in Infisical

INFISICAL_CLIENT_ID=your-infisical-universal-auth-client-id
INFISICAL_CLIENT_SECRET=your-infisical-universal-auth-client-secret
INFISICAL_SERVICE_API_KEY=optional-api-key-for-infisicalservice-endpoint

# -----------------------------------------------------------------------------
# PROJECT 1: iqs-s3-secrets
# -----------------------------------------------------------------------------
# Purpose: Hetzner S3 object storage credentials for IQS cache storage
# Environments: dev, prod
# Used by: All workflows that upload cache results to S3

# Hetzner S3 Configuration
HETZNER_S3_URL=https://fsn1.your-objectstorage.com
HETZNER_S3_REGION=fsn1
HETZNER_S3_ACCESS_KEY=your-s3-access-key-here
HETZNER_S3_SECRET_KEY=your-s3-secret-key-here
HETZNER_S3_BUCKET=px-semantic

# -----------------------------------------------------------------------------
# PROJECT 2: iqs-poolparty-secrets
# -----------------------------------------------------------------------------
# Purpose: PoolParty SPARQL endpoint credentials for semantic queries
# Environments: dev, prod
# Used by: All workflows that query PoolParty (SPARQL queries)

# PoolParty SPARQL Endpoint Configuration
POOLPARTY_SPARQL_URL=https://zeiss-prod.poolparty.biz/PoolParty/sparql/IQS
POOLPARTY_SPARQL_USERNAME=your-poolparty-username
POOLPARTY_SPARQL_PASSWORD=your-poolparty-password
POOLPARTY_PROJECT_ID=IQS

# Alternative endpoints (if different for dev/prod)
# POOLPARTY_SPARQL_URL_DEV=https://zeiss-dev.poolparty.biz/PoolParty/sparql/IQS
# POOLPARTY_SPARQL_URL_PROD=https://zeiss-prod.poolparty.biz/PoolParty/sparql/IQS

# -----------------------------------------------------------------------------
# PROJECT 3: iqs-basex-secrets
# -----------------------------------------------------------------------------
# Purpose: BaseX XML database credentials for XQuery transformations
# Environments: dev, prod
# Used by: All workflows that use BaseX for XML/XQuery processing

# BaseX Database Configuration
BASEX_URL=http://localhost:8090
BASEX_USERNAME=admin
BASEX_PASSWORD=your-basex-admin-password
BASEX_DATABASE=iqs_cache

# Alternative endpoints (if different for dev/prod)
# BASEX_URL_DEV=http://localhost:8090
# BASEX_URL_PROD=http://basex.production.internal:8090

# -----------------------------------------------------------------------------
# PROJECT 4: iqs-service-endpoints (optional)
# -----------------------------------------------------------------------------
# Purpose: Internal service endpoint URLs (if these need to be secret)
# Environments: dev, prod
# Used by: Workflow orchestration

# Microservice Endpoints
# SPARQL_SERVICE_URL=http://localhost:8091
# BASEX_SERVICE_URL=http://localhost:8090
# S3_SERVICE_URL=http://localhost:8092
# INFISICAL_SERVICE_URL=http://localhost:8093

# =============================================================================
# USAGE IN WORKFLOWS
# =============================================================================
# Secrets are referenced in workflows using ${secrets.SECRET_NAME} syntax
# after being retrieved with a RetrieveAction.
#
# Example workflow pattern:
# {
#   "itemListElement": [
#     {
#       "position": 1,
#       "item": {
#         "@type": "RetrieveAction",
#         "@id": "#retrieve-s3-secrets",
#         "target": {
#           "@type": "Project",
#           "identifier": "iqs-s3-secrets",
#           "environment": "prod",
#           "url": "https://app.infisical.com"
#         }
#       }
#     },
#     {
#       "position": 2,
#       "item": {
#         "@type": "CreateAction",
#         "additionalProperty": {"dependsOn": "#retrieve-s3-secrets"},
#         "target": {
#           "url": "${secrets.HETZNER_S3_URL}",
#           "additionalProperty": {
#             "accessKey": "${secrets.HETZNER_S3_ACCESS_KEY}",
#             "secretKey": "${secrets.HETZNER_S3_SECRET_KEY}"
#           }
#         }
#       }
#     }
#   ]
# }
#
# =============================================================================
# INFISICAL PROJECT SETUP CHECKLIST
# =============================================================================
#
# For each Infisical project, create the following environments:
# - dev (development/testing)
# - prod (production)
#
# Projects to create in Infisical:
# 1. ✓ iqs-s3-secrets (3 secrets: URL, ACCESS_KEY, SECRET_KEY)
# 2. ✓ iqs-poolparty-secrets (4 secrets: URL, USERNAME, PASSWORD, PROJECT_ID)
# 3. ✓ iqs-basex-secrets (4 secrets: URL, USERNAME, PASSWORD, DATABASE)
# 4. ✓ iqs-service-endpoints (optional, if endpoint URLs are secret)
#
# For the when scheduler host:
# 1. ✓ Set INFISICAL_CLIENT_ID environment variable
# 2. ✓ Set INFISICAL_CLIENT_SECRET environment variable
# 3. ✓ Set INFISICAL_SERVICE_API_KEY (optional, for production)
#
# =============================================================================
# CURRENT WORKFLOW USAGE ANALYSIS
# =============================================================================
#
# Workflows using S3 secrets (iqs-s3-secrets):
# - iqs-cache-prepare-workflow.json (3 S3 uploads)
# - iqs-cache-user-certificate-workflow.json (1 S3 upload)
# - iqs-cache-empolis-jsons-workflow.json (1 S3 upload)
# - iqs-cache-top-concepts-workflow.json (1 S3 upload)
# - iqs-cache-schema-st4-workflow.json (1 S3 upload)
#
# Workflows using PoolParty secrets (iqs-poolparty-secrets):
# - All workflows query PoolParty SPARQL endpoint
# - Currently using hardcoded URL: https://zeiss-prod.poolparty.biz/PoolParty/sparql/IQS
# - No authentication in current workflows (may need to add if endpoint is secured)
#
# Workflows using BaseX secrets (iqs-basex-secrets):
# - All workflows use BaseX for XQuery transformations
# - Currently using localhost:8090 (may need auth in production)
#
# =============================================================================
